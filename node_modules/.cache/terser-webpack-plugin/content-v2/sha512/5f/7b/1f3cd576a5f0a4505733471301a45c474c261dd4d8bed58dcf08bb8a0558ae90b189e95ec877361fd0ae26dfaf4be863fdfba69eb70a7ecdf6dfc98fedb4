{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{185:function(t,e,a){\"use strict\";a.r(e);var n=a(6),i=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"h5\",{attrs:{id:\"配置步骤\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#配置步骤\"}},[t._v(\"#\")]),t._v(\" 配置步骤\")]),t._v(\" \"),a(\"p\",[t._v(\"jenkins 版本 \"),a(\"a\",{attrs:{href:\"https://jenkins.io/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"2.176.3\"),a(\"OutboundLink\")],1)]),t._v(\" \"),a(\"p\",[a(\"a\",{attrs:{href:\"https://gitlab.com/gitlab-org/gitlab-foss/-/tags/v12.3.1\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"GitLab Community Edition 12.3.1\"),a(\"OutboundLink\")],1)]),t._v(\" \"),a(\"p\",[t._v(\"jenkins安装gitlab 插件，到插件管理中搜索gitlab\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/26/image.png\",alt:\"image.png\"}})]),t._v(\" \"),a(\"p\",[t._v(\"注意安装Gitlab Plugin即可，gitlab hook plugin貌似已经弃用了。\\n\"),t._v(\"\\n配置access token(使jenkins服务器不通过用户名密码访问gitlab api等)，用来通过gitlab webhook通知jenkins自动化构建用的。\")]),t._v(\" \"),a(\"p\",[t._v(\"在gitlab User Setting 中 Access Tokens中添加\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/26/imagefb19874d667620c0.png\",alt:\"imagefb19874d667620c0.png\"}})]),t._v(\" \"),a(\"p\",[t._v(\"图上的token为已经添加的状态，上面的选项可以全勾。然后复制暂时保存一下，下一步需要用到。\")]),t._v(\" \"),a(\"p\",[t._v(\"在jenkins 系统管理中配置gitlab服务器连接\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/26/image06b49423d2edad25.png\",alt:\"image06b49423d2edad25.png\"}})]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"注意\")]),t._v(\"Enable authentication for '/project' end-point 取消该选项，否则gitlab 推送webhook会报 \"),a(\"strong\",[t._v(\"403 anonymous is missing the Job/Build permission\")]),t._v(\" 的错误。\")]),t._v(\" \"),a(\"p\",[t._v(\"输入gitlab 服务器url，添加密钥，点击添加-> 密钥类型为 secret text->内容为上一步中的access token 。 然后可以测试一下连接。\")]),t._v(\" \"),a(\"p\",[a(\"strong\",[t._v(\"配置gitlab webhook\")])]),t._v(\" \"),a(\"p\",[t._v(\"首先要在jenkins新建一个任务，本文新建了一个自由风格的项目。然后配置仓库地址\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/26/image5f19704eb15e48ff.png\",alt:\"image5f19704eb15e48ff.png\"}})]),t._v(\" \"),a(\"p\",[t._v(\"添加gitlab登陆密钥，使用username password 类型的密钥。\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/26/imageaacf902d2a125446.png\",alt:\"imageaacf902d2a125446.png\"}})]),t._v(\" \"),a(\"p\",[t._v(\"构建触发器选择 Build when a change is pushed to GitLab.  gitlab webhook的url就会给出。\")]),t._v(\" \"),a(\"p\",[t._v(\"然后进入gitlab项目的setting，integrations 配置webhook。\")]),t._v(\" \"),a(\"p\",[t._v(\"![image-20190926095452786](/Users/mac/Library/Application Support/typora-user-images/image-20190926095452786.png)\")]),t._v(\" \"),a(\"p\",[t._v(\"添加webhook，如果你的域名没有安装ssl证书，就不要勾选ssl verification\")]),t._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/26/image8c19399e003790b7.png\",alt:\"image8c19399e003790b7.png\"}})]),t._v(\" \"),a(\"p\",[t._v(\"添加即可，可以测试push events ，如果返回200 即webhook推送成功。\")]),t._v(\" \"),a(\"p\",[t._v(\"接下来就可以愉快的自动化构建项目了。\")]),t._v(\" \"),a(\"p\",[t._v(\"参考：\")]),t._v(\" \"),a(\"p\",[a(\"a\",{attrs:{href:\"https://www.cnblogs.com/kevingrace/p/6479813.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"Gitlab利用Webhook实现Push代码后的jenkins自动构建\"),a(\"OutboundLink\")],1)]),t._v(\" \"),a(\"p\",[a(\"a\",{attrs:{href:\"https://qachef.blogspot.com/2017/06/gitlab-jenkins.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"GitLab透過Webhook去呼叫Jenkins\"),a(\"OutboundLink\")],1)])])}),[],!1,null,null,null);e.default=i.exports}}]);","extractedComments":[]}