{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{183:function(s,t,a){\"use strict\";a.r(t);var n=a(6),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"h5\",{attrs:{id:\"安装\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#安装\"}},[s._v(\"#\")]),s._v(\" 安装\")]),s._v(\" \"),a(\"p\",[s._v(\"操作系统 ubuntu 18\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"java安装\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" add-apt-repository ppa:openjdk-r/ppa\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 需要回车一下\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"apt-get\")]),s._v(\" update\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" y\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"|\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"apt-get\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" openjdk-8-jdk\\n\\n\")])])]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"Jenkins 安装（这里安装的是服务版本的，可以选择安装docker版本，但是docker版本使用pipline时，用shell语言传输项目包会遇到很多权限等问题）\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"wget\")]),s._v(\" -q -O - https://pkg.jenkins.io/debian/jenkins.io.key \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"|\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" apt-key \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"add\")]),s._v(\" -\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sh\")]),s._v(\" -c \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'echo deb http://pkg.jenkins.io/debian-stable binary/ > /etc/apt/sources.list.d/jenkins.list'\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"apt-get\")]),s._v(\" update\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" y\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"|\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"apt-get\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" jenkins\\n\")])])]),a(\"ul\",[a(\"li\",[s._v(\"安装完毕，相关启动命令，及目录：\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"service\")]),s._v(\" jenkins start\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"|\")]),s._v(\"stop\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"|\")]),s._v(\"restart\\n\\n/var/lib/jenkins \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# jenkins 内容目录 workspace\")]),s._v(\"\\n/var/lib/jenkins/.m2 \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# maven包放置目录\")]),s._v(\"\\n\\n/etc/default/jenkins \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# jenkins 配置文件 修改端口\")]),s._v(\"\\n\\n/usr/share/jenkins \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# jenkins war包放置目录\")]),s._v(\"\\n\")])])]),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"修改jenkins启动端口\")]),s._v(\" \"),a(\"ol\",[a(\"li\",[s._v(\"修改/etc/init.d/jenkins jenkins开机启动脚本，修改do_start函数的check_tcp_port命令，端口号从8080换成8082\")]),s._v(\" \"),a(\"li\",[s._v(\"修改/etc/default/jenkins 文件，修改：HTTP_PORT=8082\")])])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"设置jenkins\")]),s._v(\" \"),a(\"ol\",[a(\"li\",[s._v(\"此时打开对应端口网站：ip：8082，初始化时要求输入密码，密码为：/var/lib/jenkins/secrets/initialAdminPassword\")]),s._v(\" \"),a(\"li\",[s._v(\"使用推荐配置，等待安装插件完毕\")]),s._v(\" \"),a(\"li\",[s._v(\"设置用户，进入首页，tips:如果首页进入空白，则输入网址跳转到：ip:8082/pluginManager/advanced,修改：升级站点内容，的https->http,然后重启jenkins即可\")])])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"插件安装，本文安装了 blue ocean, nodejs, publish over ssh 三个插件，如果要部署maven项目可以安装maven插件\")]),s._v(\" \"),a(\"ol\",[a(\"li\",[s._v(\"blue ocean：可视化构建流程\")]),s._v(\" \"),a(\"li\",[s._v(\"nodejs： 编译nodejs 项目\")]),s._v(\" \"),a(\"li\",[s._v(\"publish over ssh： 编译完成后，传输到目标服务器\")])])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"github配置\")]),s._v(\" \"),a(\"ol\",[a(\"li\",[a(\"p\",[s._v(\"github setting->developer settings->personal access tokens,新建一个access token\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"jenkins 系统管理，添加github服务器\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/18/image7ff5ffe40ec7192a.png\",alt:\"image7ff5ffe40ec7192a.png\"}})]),s._v(\" \"),a(\"p\",[s._v(\"密钥添加类型为 secret key，secret为上一步骤的access token\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/18/image81f44369e7a63f9a.png\",alt:\"image81f44369e7a63f9a.png\"}})])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"设置github hook,找到对应的项目，setting->webhoosks->add webhook,之后接可以在每次提交代码后，github通知jenkins自动拉取代码，并自动构建\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/18/imagee67a2b274f6055f2.png\",alt:\"imagee67a2b274f6055f2.png\"}})])])])])]),s._v(\" \"),a(\"h5\",{attrs:{id:\"开始使用\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#开始使用\"}},[s._v(\"#\")]),s._v(\" 开始使用\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"新建任任务，构建一个自由风格的软件项目\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/18/image14d3545f64cd9572.png\",alt:\"image14d3545f64cd9572.png\"}})])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"进入页面，源码管理，选git ，输入仓库地址，并添加密钥，密钥类型选择username and password即可\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/18/image1eadbd538c50d3ae.png\",alt:\"image1eadbd538c50d3ae.png\"}})])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"配置构建触发，和构建环境。这里构建的是vue项目，所以选择了node环境（需要安装nodejs插件）。\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/18/image106ce49d5c9702c8.png\",alt:\"image106ce49d5c9702c8.png\"}})])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"构建步骤，选择执行shell 及send file or excute commands over ssh。第一步为通过插件构建项目，并打包。第二步为传输到目标服务器，ssh server可以通过系统管理中添加ssh server实现。这边时传输到windows 服务器，windows服务器开启sftp传输需要依赖第三方软件，本文用的是powershell server 2016，\"),a(\"a\",{attrs:{href:\"https://blog.csdn.net/achenyuan/article/details/81181347\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"具体使用方法参考\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/18/imageaa96d92508b6a834.png\",alt:\"imageaa96d92508b6a834.png\"}})])])]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/18/image5ba97e4a59dbf7cf.png\",alt:\"image5ba97e4a59dbf7cf.png\"}})]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"保存即可，此时如果本地提交代码，jenkins就可以自动拉取到代码，并自动打包传输到目标服务器。\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"Pipeline使用，pipeline为自定义脚本控制部署流程，\"),a(\"a\",{attrs:{href:\"https://jenkins.io/zh/doc/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"具体参考官网\"),a(\"OutboundLink\")],1),s._v(\"，需要在项目根目录下新建Jenkinsfile文件，示例如下：\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[s._v(\"pipeline \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    agent any\\n    stages \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        stage\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'Test'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n                steps \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n                    \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'test'\")]),s._v(\"\\n                    \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sh\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'mvn -version'\")]),s._v(\"\\n                \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n         \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n         stage\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'Build'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n                 steps \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n                    \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sh\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'mvn -B -DskipTests clean package'\")]),s._v(\"\\n                 \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n         \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n         stage\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'deliver'\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n                      steps \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n                         \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sh\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'./jenkins/test.sh'\")]),s._v(\"\\n                            \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n                  \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])])]),a(\"p\",[s._v(\"可以自定义配置步骤，并调用脚本。\")]),s._v(\" \"),a(\"p\",[s._v(\"jenkins配置示例：\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"http://blog.zhuangzexin.top:8082/images/2019/09/18/image404a5bc7631b92ae.png\",alt:\"image404a5bc7631b92ae.png\"}})]),s._v(\" \"),a(\"p\",[s._v(\"可以通过流水线语法，来生成pipeline代码。\")])])]),s._v(\" \"),a(\"h5\",{attrs:{id:\"附：\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#附：\"}},[s._v(\"#\")]),s._v(\" 附：\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"Windows 下操作脚本\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-powershell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-powershell\"}},[a(\"code\",[s._v(\"::从sftproot里拷贝传输的压缩包 至temp文件夹（覆盖）\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"copy\")]),s._v(\" C:\\\\\"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"Program Files\"')]),s._v(\"\\\\nsoftware\\\\\"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"PowerShell Server 2016\"')]),s._v(\"\\\\sftproot\\\\front\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"zip D:\\\\edu\\\\deploy_backup\\\\temp \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"y\\n::将test环境压缩至备份文件夹\\n7z a  D:\\\\edu\\\\deploy_backup\\\\zhxy\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\"Date:~0\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"4%\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\"Date:~5\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"2%\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\"Date:~8\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"2%\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\"Time:~0\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"2%\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\"Time:~3\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"2%\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),s._v(\"Time:~6\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\",\")]),s._v(\"2\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"%\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"zip D:\\\\edu\\\\zhxy_front_test\\\\\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"*\")]),s._v(\"\\n:: 删除test环境文件夹下内容\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"rmdir\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"s\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"q D:\\\\edu\\\\zhxy_front_test\\\\static\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"del\")]),s._v(\" D:\\\\edu\\\\zhxy_front_test\\\\static\\\\index\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"html\\n\\n::解压temp文件，解压后有dist目录\\n7z x D:\\\\edu\\\\deploy_backup\\\\temp\\\\front\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"zip \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),s._v(\"oD:\\\\edu\\\\deploy_backup\\\\temp\\n\\n:: 拷贝dist文件夹下所有内容到测试环境\\nxcopy D:\\\\edu\\\\deploy_backup\\\\temp\\\\dist D:\\\\edu\\\\zhxy_front_test \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"e \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"y\\n\\n:: 删除dist文件夹\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"rmdir\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"s\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"q D:\\\\edu\\\\deploy_backup\\\\temp\\\\dist\\n:: 删除传输过来的打包文件\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"del\")]),s._v(\"  C:\\\\\"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"Program Files\"')]),s._v(\"\\\\nsoftware\\\\\"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"PowerShell Server 2016\"')]),s._v(\"\\\\sftproot\\\\front\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"zip\\n\")])])])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"Linux shell 脚本\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token shebang important\"}},[s._v(\"#!/usr/bin/env bash\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 部署到docker\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[s._v(\"PROJECT\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"generator\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[s._v(\"WAR\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$WORKSPACE\")]),s._v(\"/target/\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$PROJECT\")]),s._v(\"-0.0.1-SNAPSHOT.war\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"待发布的 war 包：filepath='),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$WAR\")]),s._v('\"')]),s._v(\"\\n\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"rm\")]),s._v(\" -rf /home/docker/tomcat/webapps/\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$PROJECT\")]),s._v(\"\\n\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"unzip\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$WAR\")]),s._v(\" -d /home/docker/tomcat/webapps/\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$PROJECT\")]),s._v(\"\\n\\ndocker container restart tomcattest\\n\")])])]),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token shebang important\"}},[s._v(\"#!/bin/sh\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 远程部署,需要配置ssh免密登录\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# author: zhuang1994@foxmail.com\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# description: 自动部署war包到指定的内网docker服务器\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 1. mvn编译打包(jenkins完成)\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 2. scp到目标内网服务器, 并解压到指定目录\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 3. 重启docker tomcat容器\")]),s._v(\"\\n\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 1\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[s._v(\"PROJECT\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"generator\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[s._v(\"HOST\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"192.168\")]),s._v(\".0.1\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[s._v(\"WAR\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$WORKSPACE\")]),s._v(\"/target/\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$PROJECT\")]),s._v(\"-0.0.1-SNAPSHOT.war\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"if\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"!\")]),s._v(\" -f \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"'),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$WAR\")]),s._v('\"')]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"then\")]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"待发布的 war 包不存在：filepath='),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$WAR\")]),s._v('\"')]),s._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"exit\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"fi\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"...............path:'),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$WAR\")]),s._v('\"')]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"...............host:'),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$HOST\")]),s._v('\"')]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 3 scp war files\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"...............scp:'),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$WAR\")]),s._v(\" root@\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$HOST\")]),s._v(':/tmp\"')]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"scp\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$WAR\")]),s._v(\" root@\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$HOST\")]),s._v(\":/tmp\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\".................... scp war files: '),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$WORKSPACE\")]),s._v(\"/target/\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$PROJECT\")]),s._v('-0.0.1-SNAPSHOT.war \"')]),s._v(\"\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 4.docker container restart\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ssh\")]),s._v(\" -tt root@\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$HOST\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<<\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"EOF\\n    docker container stop tomcattest\\n\\n    rm -rf /home/docker/tomcat/webapps/\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$PROJECT\")]),s._v(\"\\n\\n    unzip /tmp/\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$PROJECT\")]),s._v(\"-0.0.1-SNAPSHOT.war -d /home/docker/tomcat/webapps/\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$PROJECT\")]),s._v(\"\\n\\n    docker container start tomcattest\\n\\n    exit\\nEOF\")]),s._v(\"\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"echo\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\".................... docker container restart tomcattest \"')]),s._v(\"\\n\")])])]),a(\"ul\",[a(\"li\",[a(\"p\",[s._v(\"参考\")]),s._v(\" \"),a(\"p\",[a(\"a\",{attrs:{href:\"https://blog.csdn.net/achenyuan/article/details/81166526\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"Widows 服务器里实现通过ssh工具SecureCRT\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"p\",[a(\"a\",{attrs:{href:\"http://www.uml.org.cn/pzgl/201808281.asp\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"实战：向GitHub提交代码时触发Jenkins自动构建\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"p\",[a(\"a\",{attrs:{href:\"https://juejin.im/post/5b6329c2e51d4519044ab85f\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"在 ubuntu 中愉快的安装 Jenkins\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"p\",[a(\"a\",{attrs:{href:\"https://blog.csdn.net/boling_cavalry/article/details/78943061\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"实战：向GitHub提交代码时触发Jenkins自动构建\"),a(\"OutboundLink\")],1)])])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);","extractedComments":[]}